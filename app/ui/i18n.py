LANG_COOKIE = "ui_lang"
DEFAULT_LANG = "zh"
SUPPORTED_LANGS = {"zh", "en"}

TRANSLATIONS = {
    "zh": {
        "brand_name": "知识库",
        "login_title": "知识库登录",
        "login_hero_title": "轻松整理、连接并检索你的知识。",
        "login_hero_subtitle": "登录后继续构建你的个人知识库。",
        "login_heading": "欢迎回来",
        "login_subtitle": "使用管理员账号登录。",
        "label_username": "用户名",
        "label_password": "密码",
        "placeholder_username": "admin",
        "placeholder_password": "••••••••",
        "action_login": "登录",
        "login_tip": "提示：用标签和摘要保持知识库整洁易检索。",
        "error_invalid_credentials": "账号或密码错误",
        "error_missing_credentials": "请输入用户名和密码",
        "items_title": "知识条目",
        "items_heading": "你的知识库",
        "items_subtitle": "浏览摘要、优化标签，让洞察随取随用。",
        "items_empty": "还没有内容。先添加一条知识吧。",
        "summary_missing": "暂无摘要，打开条目可补充。",
        "tag_untagged": "未标记",
        "action_open": "打开",
        "action_edit": "编辑",
        "detail_summary_label": "摘要",
        "detail_no_summary": "暂无摘要。",
        "detail_keywords_label": "关键词",
        "detail_tags_label": "标签",
        "detail_content_label": "正文预览",
        "detail_keyword_none": "无",
        "action_back_to_list": "返回列表",
        "action_edit_item": "编辑条目",
        "action_delete": "删除",
        "edit_heading": "编辑",
        "label_title": "标题",
        "label_summary": "摘要",
        "label_keywords": "关键词（英文逗号分隔）",
        "label_tags": "标签（英文逗号分隔）",
        "label_content": "正文",
        "action_save": "保存修改",
        "action_cancel": "取消",
        "edit_tip": "提示：摘要简洁明确，突出检索关键词。",
        "action_back_to_detail": "返回详情",
        "ingest_title": "添加知识",
        "ingest_subtitle": "从文本、链接或文件录入内容，系统会自动生成摘要、标签并支持搜索。",
        "ingest_text_card_title": "纯文本",
        "ingest_text_title_label": "标题",
        "ingest_text_content_label": "正文",
        "ingest_text_tags_label": "标签（英文逗号分隔）",
        "ingest_allow_duplicate": "允许重复内容",
        "ingest_text_hint": "适合快速记录与会议纪要。",
        "ingest_url_card_title": "链接",
        "ingest_url_label": "链接地址",
        "ingest_url_title_label": "标题（可选）",
        "ingest_url_tags_label": "标签（英文逗号分隔）",
        "ingest_url_hint": "会保留原始 HTML 便于追溯。",
        "ingest_file_card_title": "文件",
        "ingest_file_label": "文件（PDF / DOCX）",
        "ingest_file_title_label": "标题（可选）",
        "ingest_file_tags_label": "标签（英文逗号分隔）",
        "ingest_file_hint": "原文件会被保存以便后续查看。",
        "ingest_title_placeholder": "简短明确的标题",
        "ingest_content_placeholder": "粘贴正文、笔记或记录内容",
        "ingest_tags_placeholder": "研究, 产品, 洞察",
        "ingest_url_placeholder": "https://example.com/article",
        "ingest_url_title_placeholder": "留空则使用链接作为标题",
        "ingest_url_tags_placeholder": "网页, 阅读, 趋势",
        "ingest_file_title_placeholder": "留空则使用文件名",
        "ingest_file_tags_placeholder": "报告, 客户, 存档",
        "action_save_text": "保存文本",
        "action_fetch_link": "抓取链接",
        "action_upload_file": "上传文件",
        "action_add_knowledge": "添加知识",
        "action_account": "账号",
        "action_back_to_library": "返回知识库",
        "error_duplicate": "内容重复",
        "error_file_type": "仅支持 PDF 或 DOCX 文件",
    },
    "en": {
        "brand_name": "Knowledge Base",
        "login_title": "Knowledge Base Login",
        "login_hero_title": "Curate, connect, and retrieve ideas effortlessly.",
        "login_hero_subtitle": "Sign in to continue building your personal knowledge collection.",
        "login_heading": "Welcome back",
        "login_subtitle": "Use your admin credentials to enter.",
        "label_username": "Username",
        "label_password": "Password",
        "placeholder_username": "admin",
        "placeholder_password": "••••••••",
        "action_login": "Login",
        "login_tip": "Tip: keep your knowledge base tidy with meaningful tags and summaries.",
        "error_invalid_credentials": "Invalid credentials",
        "error_missing_credentials": "Username and password required",
        "items_title": "Knowledge Items",
        "items_heading": "Your curated knowledge library",
        "items_subtitle": "Browse summaries, refine tags, and keep insights organized for fast recall.",
        "items_empty": "No knowledge items yet. Add your first entry.",
        "summary_missing": "No summary yet. Open the item to add one.",
        "tag_untagged": "untagged",
        "action_open": "Open",
        "action_edit": "Edit",
        "detail_summary_label": "Summary",
        "detail_no_summary": "No summary yet.",
        "detail_keywords_label": "Keywords",
        "detail_tags_label": "Tags",
        "detail_content_label": "Content Preview",
        "detail_keyword_none": "none",
        "action_back_to_list": "Back to list",
        "action_edit_item": "Edit item",
        "action_delete": "Delete",
        "edit_heading": "Edit",
        "label_title": "Title",
        "label_summary": "Summary",
        "label_keywords": "Keywords (comma separated)",
        "label_tags": "Tags (comma separated)",
        "label_content": "Content",
        "action_save": "Save changes",
        "action_cancel": "Cancel",
        "edit_tip": "Tip: keep summaries short and focus on retrieval keywords.",
        "action_back_to_detail": "Back to detail",
        "ingest_title": "Add knowledge",
        "ingest_subtitle": "Capture ideas from text, URLs, or files. Each entry is summarized, tagged, and searchable.",
        "ingest_text_card_title": "Pure text",
        "ingest_text_title_label": "Title",
        "ingest_text_content_label": "Content",
        "ingest_text_tags_label": "Tags (comma separated)",
        "ingest_allow_duplicate": "Allow duplicate content",
        "ingest_text_hint": "Best for quick captures and meeting notes.",
        "ingest_url_card_title": "From URL",
        "ingest_url_label": "URL",
        "ingest_url_title_label": "Title (optional)",
        "ingest_url_tags_label": "Tags (comma separated)",
        "ingest_url_hint": "We keep the original HTML for traceability.",
        "ingest_file_card_title": "From file",
        "ingest_file_label": "File (PDF / DOCX)",
        "ingest_file_title_label": "Title (optional)",
        "ingest_file_tags_label": "Tags (comma separated)",
        "ingest_file_hint": "Original files are stored for later reference.",
        "ingest_title_placeholder": "Short, descriptive title",
        "ingest_content_placeholder": "Paste notes, transcripts, or drafts here.",
        "ingest_tags_placeholder": "research, product, insight",
        "ingest_url_placeholder": "https://example.com/article",
        "ingest_url_title_placeholder": "Auto-filled if blank",
        "ingest_url_tags_placeholder": "web, reading, trend",
        "ingest_file_title_placeholder": "Use filename if blank",
        "ingest_file_tags_placeholder": "report, client, archive",
        "action_save_text": "Save text",
        "action_fetch_link": "Fetch link",
        "action_upload_file": "Upload file",
        "action_add_knowledge": "Add knowledge",
        "action_account": "Account",
        "action_back_to_library": "Back to library",
        "error_duplicate": "Duplicate content",
        "error_file_type": "Only PDF or DOCX files are supported",
    },
}


def get_translator(lang: str):
    table = TRANSLATIONS.get(lang, TRANSLATIONS[DEFAULT_LANG])

    def t(key: str) -> str:
        return table.get(key, key)

    return t


def normalize_lang(lang: str | None) -> str:
    if lang in SUPPORTED_LANGS:
        return lang
    return DEFAULT_LANG
